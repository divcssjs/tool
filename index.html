<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>webåœ¨çº¿å·¥å…·é›†</title>
    <meta name="description" content="æä¾›JSONæ ¼å¼åŒ–ã€ä»£ç å‹ç¼©ã€å›¾ç‰‡è½¬æ¢ã€è½¬ä¹‰å·¥å…·ç­‰å¤šç§åœ¨çº¿å¼€å‘å·¥å…·ï¼Œä¸€ç«™å¼è§£å†³å¼€å‘éœ€æ±‚">
    <meta name="keywords" content="åœ¨çº¿å·¥å…·,JSONæ ¼å¼åŒ–,ä»£ç å‹ç¼©,å›¾ç‰‡è½¬æ¢,è½¬ä¹‰å·¥å…·,å¼€å‘å·¥å…·">
    <meta name="google-site-verification" content="hl_i7ZDiuJqV5zQ7AeZLI8zNbLQ6hrLszh2HhgzGins" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            width: 100%;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            height: 0;
            overflow: hidden;
            padding: 0;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        nav {
            background: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-link {
            padding: 8px 16px;
            background: #f8f9fa;
            border-radius: 20px;
            text-decoration: none;
            color: #495057;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: #4a6ee0;
            color: white;
        }

        .modules {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            padding: 30px 20px;
        }

        .module {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .module:hover {
            transform: translateY(-5px);
        }

        .full-width {
            grid-column: 1 / -1;
        }

        h2 {
            color: #4a6ee0;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f4ff;
        }

        .input-group,
        .output-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        textarea,
        input[type="file"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            resize: vertical;
            min-height: 150px;
            transition: border 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #4a6ee0;
            box-shadow: 0 0 0 2px rgba(74, 110, 224, 0.2);
        }

        button {
            background: #4a6ee0;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s;
            display: inline-block;
        }

        button:hover {
            background: #3a5ed0;
        }

        .action-group {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .output-group textarea {
            background-color: #f9fafc;
        }

        .hint {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .copy-btn {
            background: #28a745;
        }

        .copy-btn:hover {
            background: #218838;
        }

        .download-btn {
            background: #ff6b6b;
        }

        .download-btn:hover {
            background: #ff5252;
        }

        .image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }

        .image-container {
            flex: 1;
            min-width: 300px;
            text-align: center;
        }

        .image-container img {
            max-width: 100%;
            max-height: 300px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .image-info {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }

        .quality-control {
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quality-control label {
            margin-bottom: 0;
            min-width: 100px;
        }

        .quality-control input {
            flex: 1;
            margin: 0;
        }

        .quality-value {
            min-width: 40px;
            text-align: center;
        }

        /* ä»£ç å¯¹æ¯”æ¨¡å—æ ·å¼ */
        .code-comparison-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .code-input-group {
            flex: 1;
        }

        .code-input-group textarea {
            min-height: 250px;
            font-family: "Courier New", monospace;
        }

        .comparison-result {
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }

        .diff-header {
            background: #f8f9fa;
            padding: 10px 15px;
            border-bottom: 1px solid #ddd;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
        }

        .diff-stats {
            font-size: 14px;
            color: #666;
        }

        .diff-content {
            max-height: 400px;
            overflow: auto;
            font-family: "Courier New", monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .diff-line {
            display: flex;
            padding: 2px 10px;
        }

        .diff-line-number {
            width: 40px;
            text-align: right;
            padding-right: 10px;
            color: #999;
            user-select: none;
        }

        .diff-line-content {
            flex: 1;
            padding-left: 10px;
            border-left: 1px solid #eee;
            white-space: pre-wrap;
        }

        .diff-added {
            background-color: #d4edda;
        }

        .diff-removed {
            background-color: #f8d7da;
        }

        .diff-unchanged {
            background-color: white;
        }

        .diff-empty {
            background-color: #f8f9fa;
        }

        /* HTMLå®æ—¶é¢„è§ˆæ¨¡å—æ ·å¼ */
        .html-preview-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .html-input-group {
            flex: 1;
        }

        .html-input-group textarea {
            min-height: 400px;
            font-family: "Courier New", monospace;
        }

        .preview-group {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .preview-frame {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
            min-height: 400px;
        }

        .preview-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .auto-refresh-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.toggle-slider {
            background-color: #4a6ee0;
        }

        input:checked+.toggle-slider:before {
            transform: translateX(26px);
        }

        /* HTMLæ ¼å¼åŒ–æ¨¡å—æ ·å¼ */
        .format-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .format-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .format-option label {
            margin-bottom: 0;
            font-weight: normal;
        }

        .format-option input[type="number"] {
            width: 60px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }

        .formatted-code-container {
            position: relative;
        }

        .formatted-code {
            min-height: 400px;
            font-family: "Courier New", monospace;
            white-space: pre;
            overflow-x: auto;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9fafc;
            line-height: 1.4;
        }

        .formatted-code .tag {
            color: #905;
        }

        .formatted-code .attr-name {
            color: #07a;
        }

        .formatted-code .attr-value {
            color: #690;
        }

        .formatted-code .comment {
            color: #999;
            font-style: italic;
        }

        /* è§†é¢‘åºåˆ—å¸§æå–æ¨¡å—æ ·å¼ */
        .video-upload-area {
            border: 2px dashed #4a6ee0;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .video-upload-area:hover {
            background-color: #e9ecef;
            border-color: #3a5ed0;
        }

        .video-upload-area.dragover {
            background-color: #e3f2fd;
            border-color: #2196f3;
        }

        .video-upload-area i {
            font-size: 48px;
            color: #4a6ee0;
            margin-bottom: 15px;
        }

        .video-upload-area p {
            margin-bottom: 10px;
            color: #666;
        }

        .video-upload-area .browse-link {
            color: #4a6ee0;
            text-decoration: underline;
            cursor: pointer;
        }

        .video-preview {
            margin-top: 20px;
            text-align: center;
        }

        .video-preview video {
            max-width: 100%;
            max-height: 300px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .extraction-params {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .param-group {
            flex: 1;
            min-width: 200px;
        }

        .param-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .param-group input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
        }

        .param-value {
            text-align: center;
            font-weight: 600;
            color: #4a6ee0;
        }

        .frames-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .frame-item {
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .frame-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        .frame-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            display: block;
        }

        .frame-info {
            padding: 10px;
            background: #f8f9fa;
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .progress-container {
            margin: 20px 0;
            display: none;
        }

        .progress-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: #4a6ee0;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 5px;
            font-size: 14px;
            color: #666;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 30px 20px;
            color: #666;
            font-size: 14px;
            background: white;
            border-top: 1px solid #eee;
        }

        @media (max-width: 1366px) {
            .modules {
                grid-template-columns: repeat(2, 1fr);
            }

            .full-width {
                grid-column: 1 / -1;
            }
        }

        @media (max-width: 768px) {
            .modules {
                grid-template-columns: 1fr;
            }

            .full-width {
                grid-column: 1;
            }

            .image-container {
                min-width: 100%;
            }

            .code-comparison-container,
            .html-preview-container {
                flex-direction: column;
            }

            .nav-container {
                white-space: nowrap;
                overflow-x: auto;
                flex-wrap: nowrap;
                justify-content: unset;
            }

            .nav-link {
                width: 80%;
                text-align: center;
            }

            .format-options {
                flex-direction: column;
                gap: 10px;
            }

            .extraction-params {
                flex-direction: column;
            }
        }
    </style>
    <!-- JSZipåº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>å¤šåŠŸèƒ½åœ¨çº¿å·¥å…·é›†</h1>
            <p class="subtitle">ä¸€ç«™å¼è§£å†³æ‚¨çš„å¼€å‘ä¸å†…å®¹å¤„ç†éœ€æ±‚ - æä¾›JSONæ ¼å¼åŒ–ã€ä»£ç å‹ç¼©ã€å›¾ç‰‡è½¬æ¢ã€è½¬ä¹‰å·¥å…·ç­‰å¤šç§å®ç”¨åŠŸèƒ½</p>
        </header>

        <nav>
            <div class="nav-container">
                <a href="#js-compress" class="nav-link">JSå‹ç¼©</a>
                <a href="#css-compress" class="nav-link">CSSå‹ç¼©</a>
                <a href="#html-compress" class="nav-link">HTMLå‹ç¼©</a>
                <a href="#png-to-jpg" class="nav-link">PNGè½¬JPG</a>
                <a href="#escape" class="nav-link">è½¬ä¹‰å·¥å…·</a>
                <a href="#json-format" class="nav-link">JSONæ ¼å¼åŒ–</a>
                <a href="#html-format" class="nav-link">HTMLæ ¼å¼åŒ–</a>
                <a href="#html-preview" class="nav-link">HTMLå®æ—¶é¢„è§ˆ</a>
                <a href="#code-diff" class="nav-link">ä»£ç å¯¹æ¯”</a>
                <a href="#video-frames" class="nav-link">è§†é¢‘å¸§æå–</a>
            </div>
        </nav>

        <div class="modules">
            <!-- JSå‹ç¼©æ¨¡å— -->
            <div class="module" id="js-compress">
                <h2>JavaScriptå‹ç¼©</h2>
                <div class="input-group">
                    <label for="js-compress-input">è¾“å…¥JavaScriptä»£ç </label>
                    <textarea id="js-compress-input"
                        placeholder="function example() { console.log('Hello World'); }"></textarea>
                    <div class="hint">è¾“å…¥éœ€è¦å‹ç¼©çš„JavaScriptä»£ç </div>
                </div>
                <div class="action-group">
                    <button id="js-compress-btn">å‹ç¼©</button>
                    <button class="copy-btn" data-copy="js-compress-output">å¤åˆ¶ç»“æœ</button>
                </div>
                <div class="output-group">
                    <label for="js-compress-output">å‹ç¼©ç»“æœ</label>
                    <textarea id="js-compress-output" readonly></textarea>
                </div>
            </div>

            <!-- CSSå‹ç¼©æ¨¡å— -->
            <div class="module" id="css-compress">
                <h2>CSSå‹ç¼©</h2>
                <div class="input-group">
                    <label for="css-compress-input">è¾“å…¥CSSä»£ç </label>
                    <textarea id="css-compress-input"
                        placeholder="body { font-family: Arial; color: #333; }"></textarea>
                    <div class="hint">è¾“å…¥éœ€è¦å‹ç¼©çš„CSSä»£ç </div>
                </div>
                <div class="action-group">
                    <button id="css-compress-btn">å‹ç¼©</button>
                    <button class="copy-btn" data-copy="css-compress-output">å¤åˆ¶ç»“æœ</button>
                </div>
                <div class="output-group">
                    <label for="css-compress-output">å‹ç¼©ç»“æœ</label>
                    <textarea id="css-compress-output" readonly></textarea>
                </div>
            </div>

            <!-- HTMLå‹ç¼©æ¨¡å— -->
            <div class="module" id="html-compress">
                <h2>HTMLå‹ç¼©</h2>
                <div class="input-group">
                    <label for="html-compress-input">è¾“å…¥HTMLä»£ç </label>
                    <textarea id="html-compress-input" placeholder="<div><p>ç¤ºä¾‹æ–‡æœ¬</p></div>"></textarea>
                    <div class="hint">è¾“å…¥éœ€è¦å‹ç¼©çš„HTMLä»£ç </div>
                </div>
                <div class="action-group">
                    <button id="html-compress-btn">å‹ç¼©</button>
                    <button class="copy-btn" data-copy="html-compress-output">å¤åˆ¶ç»“æœ</button>
                </div>
                <div class="output-group">
                    <label for="html-compress-output">å‹ç¼©ç»“æœ</label>
                    <textarea id="html-compress-output" readonly></textarea>
                </div>
            </div>

            <!-- PNGè½¬JPGæ¨¡å— -->
            <div class="module" id="png-to-jpg">
                <h2>PNGè½¬JPG</h2>
                <div class="input-group">
                    <label for="png-to-jpg-input">ä¸Šä¼ PNGå›¾ç‰‡</label>
                    <input type="file" id="png-to-jpg-input" accept="image/png">
                    <div class="hint">é€‰æ‹©PNGæ ¼å¼å›¾ç‰‡æ–‡ä»¶</div>

                    <div class="quality-control">
                        <label for="jpg-quality">JPGè´¨é‡:</label>
                        <input type="range" id="jpg-quality" min="1" max="100" value="90">
                        <span id="quality-value" class="quality-value">90%</span>
                    </div>
                </div>
                <div class="action-group">
                    <button id="png-to-jpg-btn">è½¬æ¢</button>
                    <button id="download-jpg-btn" class="download-btn" disabled>ä¸‹è½½JPG</button>
                </div>
                <div class="output-group">
                    <label>è½¬æ¢ç»“æœ</label>
                    <div id="png-to-jpg-output" class="image-preview"></div>
                </div>
            </div>

            <!-- è½¬ä¹‰æ¨¡å— -->
            <div class="module" id="escape">
                <h2>è½¬ä¹‰å·¥å…·</h2>
                <div class="input-group">
                    <label for="escape-input">è¾“å…¥æ–‡æœ¬</label>
                    <textarea id="escape-input" placeholder='{"name": "ç¤ºä¾‹", "value": 123}'></textarea>
                    <div class="hint">è¾“å…¥éœ€è¦è½¬ä¹‰çš„æ–‡æœ¬</div>
                </div>
                <div class="action-group">
                    <button id="escape-btn">è½¬ä¹‰</button>
                    <button class="copy-btn" data-copy="escape-output">å¤åˆ¶ç»“æœ</button>
                </div>
                <div class="output-group">
                    <label for="escape-output">è½¬ä¹‰ç»“æœ</label>
                    <textarea id="escape-output" readonly></textarea>
                </div>
            </div>

            <!-- JSONæ ¼å¼åŒ–æ¨¡å— - å…¨å®½ -->
            <div class="module full-width" id="json-format">
                <h2>JSONæ ¼å¼åŒ–</h2>
                <div class="input-group">
                    <label for="json-format-input">è¾“å…¥JSON</label>
                    <textarea id="json-format-input" placeholder='{"name": "ç¤ºä¾‹", "value": 123}'></textarea>
                    <div class="hint">è¾“å…¥æœ‰æ•ˆçš„JSONå­—ç¬¦ä¸²</div>
                </div>
                <div class="action-group">
                    <button id="json-format-btn">æ ¼å¼åŒ–</button>
                    <button class="copy-btn" data-copy="json-format-output">å¤åˆ¶ç»“æœ</button>
                </div>
                <div class="output-group">
                    <label for="json-format-output">æ ¼å¼åŒ–ç»“æœ</label>
                    <textarea id="json-format-output" readonly></textarea>
                </div>
            </div>

            <!-- HTMLæ ¼å¼åŒ–æ¨¡å— - å…¨å®½ -->
            <div class="module full-width" id="html-format">
                <h2>HTMLæ ¼å¼åŒ–</h2>
                <div class="format-options">
                    <div class="format-option">
                        <label for="indent-size">ç¼©è¿›å¤§å°:</label>
                        <input type="number" id="indent-size" min="1" max="8" value="2">
                        <span>ç©ºæ ¼</span>
                    </div>
                    <div class="format-option">
                        <input type="checkbox" id="preserve-empty-lines" checked>
                        <label for="preserve-empty-lines">ä¿ç•™ç©ºè¡Œ</label>
                    </div>
                    <div class="format-option">
                        <input type="checkbox" id="preserve-attributes" checked>
                        <label for="preserve-attributes">ä¿ç•™å±æ€§æ¢è¡Œ</label>
                    </div>
                    <div class="format-option">
                        <input type="checkbox" id="syntax-highlight">
                        <label for="syntax-highlight">è¯­æ³•é«˜äº®</label>
                    </div>
                </div>
                <div class="input-group">
                    <label for="html-format-input">è¾“å…¥HTMLä»£ç </label>
                    <textarea id="html-format-input" placeholder="<div><p>ç¤ºä¾‹æ–‡æœ¬</p></div>"></textarea>
                    <div class="hint">è¾“å…¥éœ€è¦æ ¼å¼åŒ–çš„HTMLä»£ç </div>
                </div>
                <div class="action-group">
                    <button id="html-format-btn">æ ¼å¼åŒ–</button>
                    <button class="copy-btn" data-copy="html-format-output">å¤åˆ¶ç»“æœ</button>
                </div>
                <div class="output-group">
                    <label for="html-format-output">æ ¼å¼åŒ–ç»“æœ</label>
                    <div class="formatted-code-container">
                        <pre id="html-format-output" class="formatted-code">æ ¼å¼åŒ–åçš„HTMLä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</pre>
                    </div>
                </div>
            </div>

            <!-- HTMLå®æ—¶é¢„è§ˆæ¨¡å— - å…¨å®½ -->
            <div class="module full-width" id="html-preview">
                <h2>HTMLå®æ—¶é¢„è§ˆ</h2>
                <div class="html-preview-container">
                    <div class="html-input-group">
                        <label for="html-preview-input">è¾“å…¥HTMLä»£ç </label>
                        <textarea id="html-preview-input" placeholder="<h1>Hello World</h1><p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹</p>"></textarea>
                        <div class="hint">è¾“å…¥HTMLä»£ç ï¼Œé¢„è§ˆåŒºåŸŸå°†å®æ—¶æ›´æ–°</div>
                    </div>
                    <div class="preview-group">
                        <label for="html-preview-frame">å®æ—¶é¢„è§ˆ</label>
                        <iframe id="html-preview-frame" class="preview-frame"
                            srcdoc="<h1>HTMLé¢„è§ˆåŒºåŸŸ</h1><p>è¯·åœ¨ä¸Šæ–¹è¾“å…¥HTMLä»£ç </p>"></iframe>
                        <div class="preview-controls">
                            <div class="auto-refresh-toggle">
                                <label for="auto-refresh">å®æ—¶æ›´æ–°</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="auto-refresh" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <button id="manual-refresh-btn">æ‰‹åŠ¨åˆ·æ–°</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä»£ç å¯¹æ¯”æ¨¡å— - å…¨å®½ -->
            <div class="module full-width" id="code-diff">
                <h2>ä»£ç å¯¹æ¯”</h2>
                <div class="code-comparison-container">
                    <div class="code-input-group">
                        <label for="original-code">åŸå§‹ä»£ç </label>
                        <textarea id="original-code" placeholder="è¯·è¾“å…¥åŸå§‹ä»£ç ..."></textarea>
                    </div>
                    <div class="code-input-group">
                        <label for="modified-code">ä¿®æ”¹åä»£ç </label>
                        <textarea id="modified-code" placeholder="è¯·è¾“å…¥ä¿®æ”¹åçš„ä»£ç ..."></textarea>
                    </div>
                </div>
                <div class="action-group">
                    <button id="compare-code-btn">å¯¹æ¯”ä»£ç </button>
                    <button id="clear-code-btn" style="background: #6c757d;">æ¸…ç©º</button>
                </div>
                <div class="output-group">
                    <label>å¯¹æ¯”ç»“æœ</label>
                    <div id="code-diff-output" class="comparison-result">
                        <div class="diff-header">
                            <span>ä»£ç å·®å¼‚</span>
                            <span class="diff-stats" id="diff-stats">-</span>
                        </div>
                        <div id="diff-content" class="diff-content">
                            <div class="diff-line diff-empty">
                                <div class="diff-line-number"></div>
                                <div class="diff-line-content">è¯·åœ¨ä¸Šæ–¹è¾“å…¥ä¸¤æ®µä»£ç å¹¶ç‚¹å‡»"å¯¹æ¯”ä»£ç "æŒ‰é’®</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è§†é¢‘åºåˆ—å¸§æå–æ¨¡å— - å…¨å®½ -->
            <div class="module full-width" id="video-frames">
                <h2>è§†é¢‘åºåˆ—å¸§æå–</h2>
                <div class="input-group">
                    <label>ä¸Šä¼ è§†é¢‘æ–‡ä»¶</label>
                    <div class="video-upload-area" id="video-upload-area">
                        <i>ğŸ“¹</i>
                        <p>ç‚¹å‡»æˆ–æ‹–æ‹½è§†é¢‘æ–‡ä»¶åˆ°æ­¤å¤„</p>
                        <p class="browse-link">æµè§ˆæ–‡ä»¶</p>
                        <p class="hint">æ”¯æŒ MP4, WebM, OGG ç­‰å¸¸è§è§†é¢‘æ ¼å¼</p>
                    </div>
                    <input type="file" id="video-input" accept="video/*" style="display: none;">
                    
                    <div class="video-preview" id="video-preview" style="display: none;">
                        <video id="video-player" controls></video>
                        <div class="video-info" id="video-info"></div>
                    </div>
                    
                    <div class="extraction-params">
                        <div class="param-group">
                            <label for="frame-interval">å¸§æå–é—´éš” (ç§’)</label>
                            <input type="range" id="frame-interval" min="0.1" max="5" step="0.1" value="1">
                            <div class="param-value" id="interval-value">1.0 ç§’</div>
                        </div>
                        <div class="param-group">
                            <label for="max-frames">æœ€å¤§æå–å¸§æ•°</label>
                            <input type="range" id="max-frames" min="1" max="50" value="10">
                            <div class="param-value" id="frames-value">10 å¸§</div>
                        </div>
                    </div>
                    
                    <div class="progress-container" id="progress-container">
                        <div class="progress-bar">
                            <div class="progress" id="extraction-progress"></div>
                        </div>
                        <div class="progress-text" id="progress-text">æ­£åœ¨æå–å¸§: 0/10</div>
                    </div>
                </div>
                <div class="action-group">
                    <button id="extract-frames-btn" disabled>æå–å¸§</button>
                    <button id="download-frames-btn" class="download-btn" disabled>æ‰“åŒ…ä¸‹è½½</button>
                </div>
                <div class="output-group">
                    <label>æå–çš„å¸§</label>
                    <div id="frames-output" class="frames-preview">
                        <div class="frame-empty">è¯·ä¸Šä¼ è§†é¢‘å¹¶ç‚¹å‡»"æå–å¸§"æŒ‰é’®</div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>å¤šåŠŸèƒ½åœ¨çº¿å·¥å…·é›† | è®¾è®¡ç®€æ´ï¼ŒåŠŸèƒ½å®ç”¨ | æä¾›JSONæ ¼å¼åŒ–ã€ä»£ç å‹ç¼©ã€å›¾ç‰‡è½¬æ¢ã€è½¬ä¹‰å·¥å…·ç­‰å¤šç§å®ç”¨åŠŸèƒ½</p>
        </footer>
    </div>

    <script>
        // å¹³æ»‘æ»šåŠ¨åˆ°é”šç‚¹
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // å¤åˆ¶åŠŸèƒ½
        document.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const targetId = btn.getAttribute('data-copy');
                const outputElement = document.getElementById(targetId);

                // å¦‚æœæ˜¯ä»£ç åŒºåŸŸï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
                if (outputElement.classList.contains('formatted-code')) {
                    const text = outputElement.textContent;
                    navigator.clipboard.writeText(text).then(() => {
                        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                        const originalText = btn.textContent;
                        btn.textContent = 'å·²å¤åˆ¶!';
                        setTimeout(() => {
                            btn.textContent = originalText;
                        }, 1500);
                    });
                } else {
                    // å¸¸è§„textarea
                    outputElement.select();
                    document.execCommand('copy');

                    // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                    const originalText = btn.textContent;
                    btn.textContent = 'å·²å¤åˆ¶!';
                    setTimeout(() => {
                        btn.textContent = originalText;
                    }, 1500);
                }
            });
        });

        // JSONæ ¼å¼åŒ–åŠŸèƒ½
        document.getElementById('json-format-btn').addEventListener('click', () => {
            const input = document.getElementById('json-format-input').value.trim();
            const output = document.getElementById('json-format-output');

            if (!input) {
                output.value = 'è¯·è¾“å…¥JSONå­—ç¬¦ä¸²';
                return;
            }

            try {
                const parsed = JSON.parse(input);
                output.value = JSON.stringify(parsed, null, 2);
            } catch (e) {
                output.value = 'JSONæ ¼å¼é”™è¯¯: ' + e.message;
            }
        });

        // JSå‹ç¼©åŠŸèƒ½
        document.getElementById('js-compress-btn').addEventListener('click', () => {
            const input = document.getElementById('js-compress-input').value.trim();
            const output = document.getElementById('js-compress-output');

            if (!input) {
                output.value = 'è¯·è¾“å…¥JavaScriptä»£ç ';
                return;
            }

            // ç®€å•çš„JSå‹ç¼©æ¨¡æ‹Ÿï¼ˆç§»é™¤æ³¨é‡Šå’Œç©ºç™½ï¼‰
            let compressed = input
                .replace(/\/\*[\s\S]*?\*\//g, '') // ç§»é™¤å¤šè¡Œæ³¨é‡Š
                .replace(/\/\/.*/g, '') // ç§»é™¤å•è¡Œæ³¨é‡Š
                .replace(/\s+/g, ' ') // å°†å¤šä¸ªç©ºç™½å­—ç¬¦æ›¿æ¢ä¸ºä¸€ä¸ªç©ºæ ¼
                .replace(/\s*([{}()\[\];,=+*\/%-])\s*/g, '$1') // ç§»é™¤è¿ç®—ç¬¦å‘¨å›´çš„ç©ºæ ¼
                .trim();

            output.value = compressed;
        });

        // CSSå‹ç¼©åŠŸèƒ½
        document.getElementById('css-compress-btn').addEventListener('click', () => {
            const input = document.getElementById('css-compress-input').value.trim();
            const output = document.getElementById('css-compress-output');

            if (!input) {
                output.value = 'è¯·è¾“å…¥CSSä»£ç ';
                return;
            }

            // ç®€å•çš„CSSå‹ç¼©æ¨¡æ‹Ÿ
            let compressed = input
                .replace(/\/\*[\s\S]*?\*\//g, '') // ç§»é™¤æ³¨é‡Š
                .replace(/\s+/g, ' ') // å°†å¤šä¸ªç©ºç™½å­—ç¬¦æ›¿æ¢ä¸ºä¸€ä¸ªç©ºæ ¼
                .replace(/\s*([{}:;,])\s*/g, '$1') // ç§»é™¤é€‰æ‹©å™¨å’Œå±æ€§å‘¨å›´çš„ç©ºæ ¼
                .replace(/;}/g, '}') // ç§»é™¤æœ€åä¸€ä¸ªåˆ†å·
                .trim();

            output.value = compressed;
        });

        // HTMLå‹ç¼©åŠŸèƒ½
        document.getElementById('html-compress-btn').addEventListener('click', () => {
            const input = document.getElementById('html-compress-input').value.trim();
            const output = document.getElementById('html-compress-output');

            if (!input) {
                output.value = 'è¯·è¾“å…¥HTMLä»£ç ';
                return;
            }

            // ç®€å•çš„HTMLå‹ç¼©æ¨¡æ‹Ÿ
            let compressed = input
                .replace(/\s+/g, ' ') // å°†å¤šä¸ªç©ºç™½å­—ç¬¦æ›¿æ¢ä¸ºä¸€ä¸ªç©ºæ ¼
                .replace(/>\s+</g, '><') // ç§»é™¤æ ‡ç­¾ä¹‹é—´çš„ç©ºæ ¼
                .trim();

            output.value = compressed;
        });

        // HTMLæ ¼å¼åŒ–åŠŸèƒ½
        document.getElementById('html-format-btn').addEventListener('click', () => {
            const input = document.getElementById('html-format-input').value;
            const output = document.getElementById('html-format-output');
            const indentSize = parseInt(document.getElementById('indent-size').value);
            const preserveEmptyLines = document.getElementById('preserve-empty-lines').checked;
            const preserveAttributes = document.getElementById('preserve-attributes').checked;
            const syntaxHighlight = document.getElementById('syntax-highlight').checked;

            if (!input.trim()) {
                output.textContent = 'è¯·è¾“å…¥HTMLä»£ç ';
                return;
            }

            try {
                const formatted = formatHTML(input, indentSize, preserveEmptyLines, preserveAttributes);

                if (syntaxHighlight) {
                    output.innerHTML = highlightHTML(formatted);
                } else {
                    output.textContent = formatted;
                }
            } catch (e) {
                output.textContent = 'æ ¼å¼åŒ–é”™è¯¯: ' + e.message;
            }
        });

        // HTMLå®æ—¶é¢„è§ˆåŠŸèƒ½
        const htmlPreviewInput = document.getElementById('html-preview-input');
        const htmlPreviewFrame = document.getElementById('html-preview-frame');
        const autoRefreshToggle = document.getElementById('auto-refresh');
        const manualRefreshBtn = document.getElementById('manual-refresh-btn');

        // æ›´æ–°é¢„è§ˆ
        function updatePreview() {
            const htmlContent = htmlPreviewInput.value;
            htmlPreviewFrame.srcdoc = htmlContent || '<p>è¯·è¾“å…¥HTMLä»£ç </p>';
        }

        // è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½
        htmlPreviewInput.addEventListener('input', () => {
            if (autoRefreshToggle.checked) {
                updatePreview();
            }
        });

        // æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®
        manualRefreshBtn.addEventListener('click', updatePreview);

        // åˆå§‹æ›´æ–°ä¸€æ¬¡é¢„è§ˆ
        updatePreview();

        // PNGè½¬JPGåŠŸèƒ½
        const pngInput = document.getElementById('png-to-jpg-input');
        const qualitySlider = document.getElementById('jpg-quality');
        const qualityValue = document.getElementById('quality-value');
        const convertBtn = document.getElementById('png-to-jpg-btn');
        const downloadBtn = document.getElementById('download-jpg-btn');
        const outputDiv = document.getElementById('png-to-jpg-output');

        let convertedImageUrl = null;

        // æ›´æ–°è´¨é‡æ˜¾ç¤º
        qualitySlider.addEventListener('input', () => {
            qualityValue.textContent = qualitySlider.value + '%';
        });

        // è½¬æ¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        convertBtn.addEventListener('click', () => {
            if (!pngInput.files || !pngInput.files[0]) {
                outputDiv.innerHTML = '<p style="color: red;">è¯·é€‰æ‹©PNGå›¾ç‰‡æ–‡ä»¶</p>';
                return;
            }

            const file = pngInput.files[0];
            if (file.type !== 'image/png') {
                outputDiv.innerHTML = '<p style="color: red;">è¯·é€‰æ‹©PNGæ ¼å¼çš„å›¾ç‰‡</p>';
                return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                const img = new Image();
                img.onload = function () {
                    // åˆ›å»ºCanvasè¿›è¡Œè½¬æ¢
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;

                    const ctx = canvas.getContext('2d');

                    // å¡«å……ç™½è‰²èƒŒæ™¯ï¼ˆPNGé€æ˜èƒŒæ™¯è½¬æ¢ä¸ºJPGæ—¶éœ€è¦ï¼‰
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // ç»˜åˆ¶å›¾ç‰‡
                    ctx.drawImage(img, 0, 0);

                    // è·å–JPGæ•°æ®URL
                    const quality = parseInt(qualitySlider.value) / 100;
                    const jpgDataUrl = canvas.toDataURL('image/jpeg', quality);

                    // æ˜¾ç¤ºç»“æœ
                    outputDiv.innerHTML = `
                        <div class="image-container">
                            <h3>åŸå§‹PNGå›¾ç‰‡</h3>
                            <img src="${e.target.result}" alt="åŸå§‹PNGå›¾ç‰‡">
                            <div class="image-info">
                                å°ºå¯¸: ${img.width} Ã— ${img.height} åƒç´ <br>
                                æ–‡ä»¶å¤§å°: ${(file.size / 1024).toFixed(2)} KB
                            </div>
                        </div>
                        <div class="image-container">
                            <h3>è½¬æ¢åçš„JPGå›¾ç‰‡</h3>
                            <img src="${jpgDataUrl}" alt="è½¬æ¢åçš„JPGå›¾ç‰‡">
                            <div class="image-info">
                                å°ºå¯¸: ${img.width} Ã— ${img.height} åƒç´ <br>
                                è´¨é‡: ${qualitySlider.value}%
                            </div>
                        </div>
                    `;

                    // ä¿å­˜è½¬æ¢åçš„å›¾ç‰‡URLä¾›ä¸‹è½½ä½¿ç”¨
                    convertedImageUrl = jpgDataUrl;
                    downloadBtn.disabled = false;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        });

        // ä¸‹è½½æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        downloadBtn.addEventListener('click', () => {
            if (!convertedImageUrl) return;

            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const a = document.createElement('a');
            a.href = convertedImageUrl;
            a.download = 'converted_image.jpg';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });

        // è½¬ä¹‰åŠŸèƒ½
        document.getElementById('escape-btn').addEventListener('click', () => {
            const input = document.getElementById('escape-input').value.trim();
            const output = document.getElementById('escape-output');

            if (!input) {
                output.value = 'è¯·è¾“å…¥éœ€è¦è½¬ä¹‰çš„æ–‡æœ¬';
                return;
            }

            // è½¬ä¹‰å¤„ç†
            let escaped = input
                .replace(/\\/g, '\\\\')
                .replace(/"/g, '\\"')
                .replace(/'/g, "\\'")
                .replace(/\n/g, '\\n')
                .replace(/\r/g, '\\r')
                .replace(/\t/g, '\\t')
                .replace(/\f/g, '\\f')
                .replace(/\v/g, '\\v');

            output.value = escaped;
        });

        // ä»£ç å¯¹æ¯”åŠŸèƒ½
        document.getElementById('compare-code-btn').addEventListener('click', () => {
            const originalCode = document.getElementById('original-code').value;
            const modifiedCode = document.getElementById('modified-code').value;
            const diffContent = document.getElementById('diff-content');
            const diffStats = document.getElementById('diff-stats');

            if (!originalCode && !modifiedCode) {
                diffContent.innerHTML = `
                    <div class="diff-line diff-empty">
                        <div class="diff-line-number"></div>
                        <div class="diff-line-content">è¯·è¾“å…¥éœ€è¦å¯¹æ¯”çš„ä»£ç </div>
                    </div>
                `;
                diffStats.textContent = '-';
                return;
            }

            if (originalCode === modifiedCode) {
                diffContent.innerHTML = `
                    <div class="diff-line diff-empty">
                        <div class="diff-line-number"></div>
                        <div class="diff-line-content">ä¸¤æ®µä»£ç å®Œå…¨ç›¸åŒï¼Œæ²¡æœ‰å·®å¼‚</div>
                    </div>
                `;
                diffStats.textContent = '0 æ–°å¢, 0 åˆ é™¤';
                return;
            }

            // è®¡ç®—å·®å¼‚
            const diff = computeDiff(originalCode, modifiedCode);
            renderDiff(diff, diffContent);

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            const added = diff.filter(line => line.type === 'added').length;
            const removed = diff.filter(line => line.type === 'removed').length;
            diffStats.textContent = `${added} æ–°å¢, ${removed} åˆ é™¤`;
        });

        // æ¸…ç©ºä»£ç å¯¹æ¯”
        document.getElementById('clear-code-btn').addEventListener('click', () => {
            document.getElementById('original-code').value = '';
            document.getElementById('modified-code').value = '';
            document.getElementById('diff-content').innerHTML = `
                <div class="diff-line diff-empty">
                    <div class="diff-line-number"></div>
                    <div class="diff-line-content">è¯·åœ¨ä¸Šæ–¹è¾“å…¥ä¸¤æ®µä»£ç å¹¶ç‚¹å‡»"å¯¹æ¯”ä»£ç "æŒ‰é’®</div>
                </div>
            `;
            document.getElementById('diff-stats').textContent = '-';
        });

        // è§†é¢‘åºåˆ—å¸§æå–åŠŸèƒ½
        const videoUploadArea = document.getElementById('video-upload-area');
        const videoInput = document.getElementById('video-input');
        const videoPreview = document.getElementById('video-preview');
        const videoPlayer = document.getElementById('video-player');
        const videoInfo = document.getElementById('video-info');
        const frameInterval = document.getElementById('frame-interval');
        const maxFrames = document.getElementById('max-frames');
        const intervalValue = document.getElementById('interval-value');
        const framesValue = document.getElementById('frames-value');
        const extractFramesBtn = document.getElementById('extract-frames-btn');
        const downloadFramesBtn = document.getElementById('download-frames-btn');
        const framesOutput = document.getElementById('frames-output');
        const progressContainer = document.getElementById('progress-container');
        const extractionProgress = document.getElementById('extraction-progress');
        const progressText = document.getElementById('progress-text');

        let videoFile = null;
        let extractedFrames = [];

        // æ›´æ–°å‚æ•°æ˜¾ç¤º
        frameInterval.addEventListener('input', () => {
            intervalValue.textContent = `${frameInterval.value} ç§’`;
        });

        maxFrames.addEventListener('input', () => {
            framesValue.textContent = `${maxFrames.value} å¸§`;
        });

        // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©
        videoUploadArea.addEventListener('click', () => {
            videoInput.click();
        });

        // æ–‡ä»¶é€‰æ‹©å˜åŒ–
        videoInput.addEventListener('change', handleVideoFileSelect);

        // æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½
        videoUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            videoUploadArea.classList.add('dragover');
        });

        videoUploadArea.addEventListener('dragleave', () => {
            videoUploadArea.classList.remove('dragover');
        });

        videoUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            videoUploadArea.classList.remove('dragover');
            
            if (e.dataTransfer.files.length > 0) {
                videoInput.files = e.dataTransfer.files;
                handleVideoFileSelect();
            }
        });

        // å¤„ç†è§†é¢‘æ–‡ä»¶é€‰æ‹©
        function handleVideoFileSelect() {
            if (videoInput.files && videoInput.files[0]) {
                videoFile = videoInput.files[0];
                
                // éªŒè¯æ–‡ä»¶ç±»å‹
                if (!videoFile.type.startsWith('video/')) {
                    alert('è¯·é€‰æ‹©æœ‰æ•ˆçš„è§†é¢‘æ–‡ä»¶');
                    return;
                }
                
                // åˆ›å»ºè§†é¢‘URL
                const videoURL = URL.createObjectURL(videoFile);
                videoPlayer.src = videoURL;
                
                // æ˜¾ç¤ºè§†é¢‘é¢„è§ˆ
                videoPreview.style.display = 'block';
                
                // è·å–è§†é¢‘ä¿¡æ¯
                videoPlayer.addEventListener('loadedmetadata', () => {
                    const duration = videoPlayer.duration;
                    const width = videoPlayer.videoWidth;
                    const height = videoPlayer.videoHeight;
                    
                    videoInfo.innerHTML = `
                        <p>æ–‡ä»¶å: ${videoFile.name}</p>
                        <p>æ—¶é•¿: ${formatTime(duration)}</p>
                        <p>åˆ†è¾¨ç‡: ${width} Ã— ${height}</p>
                        <p>æ–‡ä»¶å¤§å°: ${(videoFile.size / (1024 * 1024)).toFixed(2)} MB</p>
                    `;
                    
                    // å¯ç”¨æå–æŒ‰é’®
                    extractFramesBtn.disabled = false;
                });
                
                // é‡ç½®æå–ç»“æœ
                extractedFrames = [];
                framesOutput.innerHTML = '<div class="frame-empty">è¯·ç‚¹å‡»"æå–å¸§"æŒ‰é’®</div>';
                downloadFramesBtn.disabled = true;
            }
        }

        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // æå–å¸§
        extractFramesBtn.addEventListener('click', extractFrames);

        async function extractFrames() {
            if (!videoFile) return;
            
            const interval = parseFloat(frameInterval.value);
            const maxFrameCount = parseInt(maxFrames.value);
            
            // æ˜¾ç¤ºè¿›åº¦æ¡
            progressContainer.style.display = 'block';
            extractionProgress.style.width = '0%';
            progressText.textContent = `æ­£åœ¨æå–å¸§: 0/${maxFrameCount}`;
            
            // é‡ç½®æå–ç»“æœ
            extractedFrames = [];
            framesOutput.innerHTML = '';
            
            // åˆ›å»ºCanvasç”¨äºæå–å¸§
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // ç­‰å¾…è§†é¢‘å¯ä»¥æ’­æ”¾
            await new Promise(resolve => {
                if (videoPlayer.readyState >= 2) {
                    resolve();
                } else {
                    videoPlayer.addEventListener('loadeddata', resolve);
                }
            });
            
            const duration = videoPlayer.duration;
            canvas.width = videoPlayer.videoWidth;
            canvas.height = videoPlayer.videoHeight;
            
            // è®¡ç®—æå–çš„æ—¶é—´ç‚¹
            const timePoints = [];
            for (let i = 0; i < maxFrameCount; i++) {
                const time = Math.min(i * interval, duration - 0.1);
                timePoints.push(time);
            }
            
            // æå–æ¯ä¸€å¸§
            for (let i = 0; i < timePoints.length; i++) {
                const time = timePoints[i];
                
                // è®¾ç½®è§†é¢‘æ—¶é—´
                videoPlayer.currentTime = time;
                
                // ç­‰å¾…è§†é¢‘è·³è½¬åˆ°æŒ‡å®šæ—¶é—´
                await new Promise(resolve => {
                    videoPlayer.onseeked = () => {
                        // ç»˜åˆ¶å½“å‰å¸§åˆ°Canvas
                        ctx.drawImage(videoPlayer, 0, 0, canvas.width, canvas.height);
                        
                        // è½¬æ¢ä¸ºæ•°æ®URL
                        const dataURL = canvas.toDataURL('image/jpeg', 0.9);
                        
                        // ä¿å­˜å¸§ä¿¡æ¯
                        extractedFrames.push({
                            time: time,
                            dataURL: dataURL,
                            index: i
                        });
                        
                        // æ›´æ–°è¿›åº¦
                        const progress = ((i + 1) / timePoints.length) * 100;
                        extractionProgress.style.width = `${progress}%`;
                        progressText.textContent = `æ­£åœ¨æå–å¸§: ${i + 1}/${maxFrameCount}`;
                        
                        resolve();
                    };
                });
                
                // æ˜¾ç¤ºæå–çš„å¸§
                displayFrame(extractedFrames[i], i);
            }
            
            // éšè—è¿›åº¦æ¡
            setTimeout(() => {
                progressContainer.style.display = 'none';
            }, 1000);
            
            // å¯ç”¨ä¸‹è½½æŒ‰é’®
            downloadFramesBtn.disabled = false;
        }

        // æ˜¾ç¤ºæå–çš„å¸§
        function displayFrame(frame, index) {
            const frameItem = document.createElement('div');
            frameItem.className = 'frame-item';
            
            frameItem.innerHTML = `
                <img src="${frame.dataURL}" alt="å¸§ ${index + 1}">
                <div class="frame-info">
                    å¸§ ${index + 1}<br>
                    æ—¶é—´: ${formatTime(frame.time)}
                </div>
            `;
            
            framesOutput.appendChild(frameItem);
        }

        // æ‰“åŒ…ä¸‹è½½æ‰€æœ‰å¸§
        downloadFramesBtn.addEventListener('click', downloadFrames);

        async function downloadFrames() {
            if (extractedFrames.length === 0) return;
            
            // åˆ›å»ºZIPæ–‡ä»¶
            const zip = new JSZip();
            const imgFolder = zip.folder("frames");
            
            // æ·»åŠ æ¯ä¸€å¸§åˆ°ZIP
            for (let i = 0; i < extractedFrames.length; i++) {
                const frame = extractedFrames[i];
                const base64Data = frame.dataURL.split(',')[1];
                imgFolder.file(`frame_${i + 1}_${formatTime(frame.time).replace(':', '-')}.jpg`, base64Data, {base64: true});
            }
            
            // ç”ŸæˆZIPæ–‡ä»¶å¹¶ä¸‹è½½
            const zipBlob = await zip.generateAsync({type: "blob"});
            const downloadUrl = URL.createObjectURL(zipBlob);
            
            const a = document.createElement('a');
            a.href = downloadUrl;
            a.download = 'extracted_frames.zip';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            // æ¸…ç†URL
            setTimeout(() => URL.revokeObjectURL(downloadUrl), 100);
        }

        // è®¡ç®—ä»£ç å·®å¼‚
        function computeDiff(original, modified) {
            const originalLines = original.split('\n');
            const modifiedLines = modified.split('\n');

            const diff = [];
            let i = 0, j = 0;

            while (i < originalLines.length || j < modifiedLines.length) {
                if (i < originalLines.length && j < modifiedLines.length &&
                    originalLines[i] === modifiedLines[j]) {
                    // ç›¸åŒçš„è¡Œ
                    diff.push({
                        type: 'unchanged',
                        originalLine: i + 1,
                        modifiedLine: j + 1,
                        content: originalLines[i]
                    });
                    i++;
                    j++;
                } else {
                    // æŸ¥æ‰¾åˆ é™¤çš„è¡Œ
                    let foundInModified = false;
                    for (let k = j; k < modifiedLines.length; k++) {
                        if (originalLines[i] === modifiedLines[k]) {
                            foundInModified = true;
                            // æ·»åŠ æ–°å¢çš„è¡Œ
                            for (let l = j; l < k; l++) {
                                diff.push({
                                    type: 'added',
                                    originalLine: null,
                                    modifiedLine: l + 1,
                                    content: modifiedLines[l]
                                });
                            }
                            j = k;
                            break;
                        }
                    }

                    // æŸ¥æ‰¾æ–°å¢çš„è¡Œ
                    let foundInOriginal = false;
                    for (let k = i; k < originalLines.length; k++) {
                        if (originalLines[k] === modifiedLines[j]) {
                            foundInOriginal = true;
                            // æ·»åŠ åˆ é™¤çš„è¡Œ
                            for (let l = i; l < k; l++) {
                                diff.push({
                                    type: 'removed',
                                    originalLine: l + 1,
                                    modifiedLine: null,
                                    content: originalLines[l]
                                });
                            }
                            i = k;
                            break;
                        }
                    }

                    if (!foundInModified && !foundInOriginal) {
                        // æ—¢ä¸æ˜¯åˆ é™¤ä¹Ÿä¸æ˜¯æ–°å¢ï¼Œå¯èƒ½æ˜¯ä¿®æ”¹
                        if (i < originalLines.length) {
                            diff.push({
                                type: 'removed',
                                originalLine: i + 1,
                                modifiedLine: null,
                                content: originalLines[i]
                            });
                            i++;
                        }
                        if (j < modifiedLines.length) {
                            diff.push({
                                type: 'added',
                                originalLine: null,
                                modifiedLine: j + 1,
                                content: modifiedLines[j]
                            });
                            j++;
                        }
                    }
                }
            }

            return diff;
        }

        // æ¸²æŸ“å·®å¼‚ç»“æœ
        function renderDiff(diff, container) {
            container.innerHTML = '';

            diff.forEach(line => {
                const lineElement = document.createElement('div');
                lineElement.className = `diff-line diff-${line.type}`;

                const lineNumberElement = document.createElement('div');
                lineNumberElement.className = 'diff-line-number';
                lineNumberElement.textContent = line.type === 'added' ? '' : line.originalLine;

                const lineContentElement = document.createElement('div');
                lineContentElement.className = 'diff-line-content';
                lineContentElement.textContent = line.content || ' ';

                if (line.type === 'added') {
                    lineContentElement.innerHTML = `<span style="color: #155724;">+ ${line.content || ' '}</span>`;
                } else if (line.type === 'removed') {
                    lineContentElement.innerHTML = `<span style="color: #721c24;">- ${line.content || ' '}</span>`;
                } else {
                    lineContentElement.innerHTML = `  ${line.content || ' '}`;
                }

                lineElement.appendChild(lineNumberElement);
                lineElement.appendChild(lineContentElement);
                container.appendChild(lineElement);
            });
        }

        // HTMLæ ¼å¼åŒ–å‡½æ•°
        function formatHTML(html, indentSize = 2, preserveEmptyLines = true, preserveAttributes = true) {
            // ç§»é™¤å¤šä½™ç©ºç™½ï¼Œä½†ä¿ç•™æ¢è¡Œ
            html = html.replace(/\s+/g, ' ').replace(/>\s+</g, '><');

            let formatted = '';
            let indent = 0;
            let inTag = false;
            let inComment = false;
            let currentLine = '';

            // è‡ªé—­åˆæ ‡ç­¾åˆ—è¡¨
            const selfClosingTags = [
                'area', 'base', 'br', 'col', 'embed', 'hr', 'img',
                'input', 'link', 'meta', 'param', 'source', 'track', 'wbr'
            ];

            // å¤„ç†æ¯ä¸€è¡Œ
            const lines = html.split('\n');

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i].trim();
                if (!line && !preserveEmptyLines) continue;

                // å¤„ç†æ³¨é‡Š
                if (line.includes('<!--') && line.includes('-->')) {
                    // å•è¡Œæ³¨é‡Š
                    const indentStr = ' '.repeat(indent * indentSize);
                    formatted += indentStr + line + '\n';
                } else if (line.includes('<!--')) {
                    // æ³¨é‡Šå¼€å§‹
                    inComment = true;
                    const indentStr = ' '.repeat(indent * indentSize);
                    formatted += indentStr + line + '\n';
                    indent++;
                } else if (line.includes('-->')) {
                    // æ³¨é‡Šç»“æŸ
                    indent--;
                    const indentStr = ' '.repeat(indent * indentSize);
                    formatted += indentStr + line + '\n';
                    inComment = false;
                } else if (inComment) {
                    // æ³¨é‡Šå†…å®¹
                    const indentStr = ' '.repeat(indent * indentSize);
                    formatted += indentStr + line + '\n';
                } else {
                    // å¤„ç†æ™®é€šHTML
                    const tokens = line.split(/(<[^>]+>)/g);

                    for (let j = 0; j < tokens.length; j++) {
                        let token = tokens[j];
                        if (!token) continue;

                        if (token.startsWith('<')) {
                            // æ ‡ç­¾
                            const isClosing = token.startsWith('</');
                            const isSelfClosing = selfClosingTags.some(tag =>
                                token.includes(`<${tag}`) && !token.includes(`</${tag}`)
                            ) || token.endsWith('/>');

                            if (isClosing) {
                                indent--;
                            }

                            const indentStr = ' '.repeat(indent * indentSize);

                            if (preserveAttributes && token.length > 80) {
                                // é•¿æ ‡ç­¾ï¼Œå°è¯•æ ¼å¼åŒ–å±æ€§
                                const tagMatch = token.match(/^<(\w+)([^>]*)>$/);
                                if (tagMatch) {
                                    const tagName = tagMatch[1];
                                    const attributes = tagMatch[2];

                                    if (attributes.trim()) {
                                        // åˆ†å‰²å±æ€§
                                        const attrRegex = /(\s+[^=]+=("[^"]*"|'[^']*'))/g;
                                        let attrs = [];
                                        let match;

                                        while ((match = attrRegex.exec(attributes)) !== null) {
                                            attrs.push(match[1]);
                                        }

                                        if (attrs.length > 0) {
                                            formatted += indentStr + `<${tagName}`;

                                            if (attrs.length === 1) {
                                                formatted += attrs[0] + '>\n';
                                            } else {
                                                formatted += '\n';
                                                for (let k = 0; k < attrs.length; k++) {
                                                    formatted += indentStr + ' '.repeat(indentSize) + attrs[k];
                                                    if (k < attrs.length - 1) formatted += '\n';
                                                }
                                                formatted += '\n' + indentStr + '>\n';
                                            }
                                        } else {
                                            formatted += indentStr + token + '\n';
                                        }
                                    } else {
                                        formatted += indentStr + token + '\n';
                                    }
                                } else {
                                    formatted += indentStr + token + '\n';
                                }
                            } else {
                                formatted += indentStr + token + '\n';
                            }

                            if (!isClosing && !isSelfClosing) {
                                indent++;
                            }
                        } else {
                            // æ–‡æœ¬å†…å®¹
                            if (token.trim()) {
                                const indentStr = ' '.repeat(indent * indentSize);
                                formatted += indentStr + token.trim() + '\n';
                            }
                        }
                    }
                }
            }

            return formatted;
        }

        // HTMLè¯­æ³•é«˜äº®å‡½æ•°
        function highlightHTML(html) {
            return html
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/(&lt;\/?)(\w+)/g, '$1<span class="tag">$2</span>')
                .replace(/(\s+)(\w+)=/g, '$1<span class="attr-name">$2</span>=')
                .replace(/(=)("[^"]*"|'[^']*')/g, '$1<span class="attr-value">$2</span>')
                .replace(/&lt;!--[\s\S]*?--&gt;/g, '<span class="comment">$&</span>');
        }
    </script>
</body>

</html>
